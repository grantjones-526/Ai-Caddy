{% extends 'dashboard/base.html' %}

{% block content %}
<h2>My Bag - Club Performance</h2>
<div class="card">
    <table>
        <thead>
            <tr>
                <th>Club Name</th>
                <th>Avg. Distance - Fairway/Tee Box</th>
                <th>Avg. Distance - Rough</th>
                <th>Consistency (Std. Dev)</th>
            </tr>
        </thead>
        <tbody>
            {% for club in clubs %}
            <tr>
                <td data-label="Club Name"><strong>{{ club.name }}</strong></td>
                <td data-label="Avg. Distance - Fairway/Tee Box">
                    {% if club.avg_fairway %}
                        {{ club.avg_fairway|floatformat:0 }} yds
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td data-label="Avg. Distance - Rough">
                    {% if club.avg_rough %}
                        {{ club.avg_rough|floatformat:0 }} yds
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td data-label="Consistency (Std. Dev)">
                    {% if club.std_dev %}
                        {{ club.std_dev|floatformat:1 }}
                    {% else %}
                        -
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <p style="margin-top: 1rem; font-size: 0.9rem; color: var(--masters-green-dark);">
        <em>Note: Sand shots are excluded from averages. Tee Box shots are grouped with Fairway.</em>
    </p>
</div>

<h2>Recent Rounds</h2>
<div class="card">
    
    <div class="round-actions">
        <a href="{% url 'add_round' %}" class="button-primary">
            Add New Round
        </a>
        <a href="{% url 'import_launch_monitor' %}" class="button-secondary">
            Import Launch Monitor
        </a>
        <a href="{% url 'load_test_data' %}" class="button-secondary">
            Load Test Data
        </a>
        <a href="{% url 'clear_all_data' %}" class="button-danger" style="background: linear-gradient(135deg, #8B0000 0%, #dc3545 100%); border-color: #8B0000;">
            Clear All Data
        </a>
    </div>
    <!-- End of new section -->

    <ul>
        {% for round in rounds %}
            <!-- Added the |date filter for cleaner formatting -->
            <li><a href="{% url 'round_detail' round.id %}">{{ round.course_name }} - {{ round.date|date:"m/d/Y" }}</a></li>
        {% empty %}
            <li>You haven't recorded any rounds yet.</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
